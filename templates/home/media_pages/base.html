{% extends "home/base.html" %}
{% load comments %}

{% if not request.is_ajax %}
    {% block postscripts %}
        {{ block.super }}
        <script>$(comment_onload);{% block normalscripts %}{% endblock %}</script>
    {% endblock %}
{% endif %}

{% block content %}
    <div id="{% block div_id %}mediapage{% endblock %}">
        {% if request.is_ajax %}
            <script>$(userid_load);$(comment_onload);{% block ajaxscripts %}{% endblock %}</script>
        {% endif %}
        {% if object %}

            {% block objectcontent %}{% endblock %}

            <ul>
                {% for tag in tags %}
                    <li title="There are {{ tag.count|default:"0" }} items tagged with '{{ tag.name }}'"><a href="{% url tagged tag.name %}"><b>{{ tag.name }}</b> &times;{{ tag.count|default:"0" }}</a></li>
                {% endfor %}
            </ul>

            {% get_comment_count for object as comment_count %}
            <p>{{ comment_count }} comments have been posted.</p>
            {% get_comment_list for object as comment_list %}
            {% include "comments/comments.html" with anchored=1 stubbed=0 modcontrols=1 title=1 %}
            {% get_comment_form for object as form %}
            {% include "comments/form.html" %}
        {% else %}
            {% block emptymsg %}<p>Object does not exist.</p>{% endblock %}
        {% endif %}
    </div>
{% endblock %}